# Copyright 2010-2012 Chernov A.A.
# Distributed under the terms of the GNU General Public License v2

DESCRIPTION="Cross platform Make"

HOMEPAGE="http://www.cmake.org/"

LICENSE="CMake"

#   dependencies:
# net-misc/curl
# dev-libs/expat
# sys-libs/zlib
# app-arch/libbz2
# app-arch/libarchive

SRC_URI="http://www.cmake.org/files/v2.8/${P}.tar.gz"

src_prepare()
{
	epatch "${P}-libarchive.patch"
	epatch "${P}-mingw32-bz2_check.patch"
}

src_configure()
{
	LDFLAGS="-Wl,--enable-auto-import" \
		./bootstrap --prefix="${PREFIX}" --parallel=${MAKEOPTS} \
		--system-libs --no-qt-gui
	checkexitcode $? "bootstrap failed"
}
