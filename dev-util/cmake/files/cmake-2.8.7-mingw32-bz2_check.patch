diff -urBb cmake-2.8.7-orig/Modules/FindBZip2.cmake cmake-2.8.7/Modules/FindBZip2.cmake
--- cmake-2.8.7-orig/Modules/FindBZip2.cmake	2011-12-30 20:49:56 +0400
+++ cmake-2.8.7/Modules/FindBZip2.cmake	2012-02-23 15:43:24 +0400
@@ -30,8 +30,32 @@
 FIND_PACKAGE_HANDLE_STANDARD_ARGS(BZip2 DEFAULT_MSG BZIP2_LIBRARIES BZIP2_INCLUDE_DIR)
 
 IF (BZIP2_FOUND)
-   INCLUDE(CheckLibraryExists)
-   CHECK_LIBRARY_EXISTS(${BZIP2_LIBRARIES} BZ2_bzCompressInit "" BZIP2_NEED_PREFIX)
+#   INCLUDE(CheckLibraryExists)
+#   CHECK_LIBRARY_EXISTS(${BZIP2_LIBRARIES} BZ2_bzCompressInit "" BZIP2_NEED_PREFIX)
+   
+   include(CheckCSourceCompiles)
+   
+   set(CMAKE_REQUIRED_LIBRARIES_save ${CMAKE_REQUIRED_LIBRARIES})
+   set(CMAKE_REQUIRED_INCLUDES_save ${CMAKE_REQUIRED_INCLUDES}) 
+   set(CMAKE_REQUIRED_LIBRARIES ${BZIP2_LIBRARIES})
+   set(CMAKE_REQUIRED_INCLUDES ${BZIP2_INCLUDE_DIR})
+   
+   CHECK_C_SOURCE_COMPILES("
+#include <bzlib.h>
+int main()
+{
+  return BZ2_bzlibVersion ();
+}" BZIP2_COMPILES)
+
+   if(BZIP2_COMPILES)
+      set(BZIP2_NEED_PREFIX TRUE)
+   endif(BZIP2_COMPILES)
+   
+   set(CMAKE_REQUIRED_LIBRARIES ${CMAKE_REQUIRED_LIBRARIES_save})
+   set(CMAKE_REQUIRED_INCLUDES ${CMAKE_REQUIRED_INCLUDES_save})
+   unset(CMAKE_REQUIRED_LIBRARIES_save)
+   unset(CMAKE_REQUIRED_INCLUDES_save)
+   unset(BZIP2_COMPILES)
 ENDIF (BZIP2_FOUND)
 
 MARK_AS_ADVANCED(BZIP2_INCLUDE_DIR BZIP2_LIBRARIES)
